!function(){"use strict";function t(t){return $.ajax({url:"https://public-api.wordpress.com/rest/v1/sites/"+t+"/posts/",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","BEARER "+i["#access_token"])}}).then(function(t){return t.posts})}if(!window.location.hash){var e=window.location.origin+window.location.pathname;return void(window.location="https://public-api.wordpress.com/oauth2/authorize?client_id=44085&redirect_uri="+e+"&response_type=token")}var i={};window.location.hash.split("&").forEach(function(t){var e=t.split("=",2);i[e[0]]=decodeURIComponent(e[1])});var s={sites:[],subscribe:function(){var t=$("#site_id").val();$("#site_id").val(""),this.sites.push(t),this.updateSites(),this.updatePosts()},updateSites:function(){var t=this.sites.map(function(t){return $('<li class="list-group-item">').text(t)});$("#sites").empty().append(t)},updatePosts:function(){var e=this.sites.map(function(e){return t(e)});$.when.apply($,e).then(function(){var t=Array.prototype.slice.apply(arguments),e=Array.prototype.concat.apply([],t);e.sort(function(t,e){var i=Date.parse(t.date),s=Date.parse(e.date);return s-i}),console.log(e);var i=e.map(function(t){return $('<li class="list-group-item">').text(t.title)});$("#posts").empty().append(i)})}};$(document).on("click","#subscribe",s.subscribe.bind(s))}();